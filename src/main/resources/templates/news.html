<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Tin Tức</title>

<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
	rel="stylesheet" />
<link rel="stylesheet" th:href="@{/css/sign.css}">
<link rel="stylesheet" th:href="@{/css/style.css}">
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<link rel="stylesheet" th:href="@{/plugins/uikit/uikit.min.css}">
<script th:src="@{/plugins/uikit/uikit.min.js}"></script>
<script th:src="@{/plugins/uikit/uikit-icons.min.js}"></script>

<style>
#mobile {
	display: none;
}

#desktop {
	display: inline-flex;
}

.shortDescription {
	display: -webkit-box;
	-webkit-line-clamp: 3;
	overflow-y: hidden;
	text-overflow: ellipsis;
	-webkit-box-orient: vertical;
	color: gray;
}

.title {
	text-decoration: none !important;
	transition: 0.25s color;
}

.title:hover {
	color: orangered;
}

.thumbnail {
	border-radius: 10px;
}

body {
	min-height: 100vh;
	margin: 0
}

.page {
	min-height: 100vh;
	display: flex;
	flex-direction: column
}

main {
	flex: 1 0 auto
}

@media ( min-width : 992px) {
	.sticky-sidebar {
		position: sticky;
		top: 5rem
	}
}

.img-swap img+img {
	opacity: 0;
	transition: opacity .25s ease;
}

.img-swap:hover img+img {
	opacity: 1;
}

@media ( max-width :768px) {
	#mobile {
		display: block;
	}
	#desktop {
		display: none;
	}
	.thumbnail {
		height: 100%;
	}
	#news-panel {
		padding: 20px;
	}
	.mobile-card {
		margin-bottom: 20px;
		border: 1px solid gray;
		border-radius: 10px;
	}
}
</style>
</head>
<body>
	<div class="page">

		<!-- Header -->
		<div th:replace="~{/fragment/header.html :: header}"></div>

		<!-- Main -->
		<main class="container-fluid px-0 py-4 container">
			<div class="row gx-0 gy-4 align-items-stretch">

				<!-- Nội dung tìm kiếm -->
				<section id="news-panel" class="col-12 col-lg-9 pe-lg-4">
					<h2 class="mb-4">Trang tin tức</h2>


					<!-- Có kết quả -->
					<div style="padding: 20px;" th:if="${newsList != null and !#lists.isEmpty(newsList)}">

						<div id="desktop" th:each="news : ${newsList}" class="row"
							style="margin-bottom: 20px;">
							<div class="col-md-3">
								<!-- Ảnh chính từ S3 (fallback) -->
								<a th:href="@{/news/{id}(id=${news.name})}"><img
									class="thumbnail"
									th:src="@{|https://s3.cloudfly.vn/kltn/images/news/main-image/${news.image}|}"
									th:alt="${news.name}" loading="lazy">
								</a>
							</div>
							<div class="col-md-9">
								<h3>
									<a class="title" th:href="@{/news/{id}(id=${news.name})}"
										th:text="${news.name}"></a>
								</h3>
								<p class="shortDescription" th:text="${news.shortDescription}"></p>
							</div>
						</div>


						<div id="mobile" th:each="news : ${newsList}"
							class="row mobile-card">
							<div class="col-md-3" style="padding: unset">
								<!-- Ảnh chính từ S3 (fallback) -->
								<a th:href="@{/news/{id}(id=${news.name})}"><img class="thumbnail"
									th:src="@{|https://s3.cloudfly.vn/kltn/images/news/main-image/${news.image}|}"
									th:alt="${news.name}" loading="lazy">
									</a>
							</div>
							<div class="col-md-9"
								style="background-color: #f9f9f9; border-top: 1px solid;">
								<h3 style="margin: 5px 0px;">
									<a th:href="@{/news/{id}(id=${news.name})}"
										th:text="${news.name}"></a>
								</h3>
								<div class="shortDescription" th:text="${news.shortDescription}"></div>
							</div>
						</div>
					</div>

				</section>

				<!-- Sidebar phải -->
				<aside class="col-12 col-lg-3 px-0">
					<div class="sticky-sidebar h-100">
						<div class="card rounded-3">
							<div class="card-body">
								<h5 class="card-title mb-3">Sản phẩm liên quan</h5>
								<ul class="list-unstyled mb-0">
									<li th:each="p : ${featuredProducts}"><a
										th:href="@{/san-pham/{id}(id=${p.name})}" th:text="${p.name}">Tên
											SP</a></li>
								</ul>
							</div>
						</div>
					</div>
				</aside>

			</div>
		</main>

		<!-- Footer -->
		<div th:replace="~{/fragment/footer.html :: footer}"></div>
	</div>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
