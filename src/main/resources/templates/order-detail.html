<!DOCTYPE html>
<html lang="vi" xmlns:th="www.thymeleaf.org">

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" th:href="@{/plugins/bootstrap/bootstrap.min.css}">
<link rel="stylesheet" th:href="@{/plugins/animate/animate.min.css}">
<link rel="stylesheet" th:href="@{/plugins/fontawesome/all.css}">
<link rel="stylesheet" th:href="@{/plugins/webfonts/font.css}">
<link rel="stylesheet" th:href="@{/css/owl.carousel.min.css}"
	type="text/css">
<link rel="stylesheet" th:href="@{/css/owl.theme.default.min.css}"
	type="text/css">
<link rel="stylesheet" type="text/css" th:href="@{/css/style.css}">
<link rel="stylesheet" type="text/css"
	th:href="@{https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css}">
<!-- UIkit CSS -->
<link rel="stylesheet" th:href="@{/plugins/uikit/uikit.min.css}" />
<link rel="stylesheet" th:href="@{/css/sign.css}">

<title>Sign up</title>
<style>
.avatar-container {
	position: relative;
	width: 100px;
	height: 100px;
	cursor: pointer;
	margin: 0px auto;
}

.avatar-container img {
	width: 100%;
	height: 100%;
	border-radius: 50%;
	object-fit: cover;
	border: 2px solid #ccc;
	transition: 0.3s;
}

.avatar-container:hover img {
	opacity: 0.8;
}

.input-form {
	margin-top: 10px;
}

.input-field {
	border: none;
	background-color: white !important;
	display: inline-block;
	width: 80%;
}

.btn-update {
	opacity: 0;
	pointer-events: none;
}

#current-order-status{
	font-style: italic;
	animation: blink 3s linear infinite;
}
@keyframes blink{
	0%, 50%, 100%{
		opacity: 1;
	}
	
	25%, 75%{
		opacity: 0;
	}
}
</style>
</head>

<body>
	<span th:replace="~{/fragment/header.html :: header}"></span>
	<!--Content-->
	<div class="content">
		<div class="container">
			<div style="margin: 70px 0px;">
				<table class="table table-hover">
					<thead class="table-light">
						<tr>
							<th colspan="6" class="table-dark" style="text-align: center; font-size: 20px;">Thông
								tin sản phẩm</th>
						</tr>
						<tr>
							<th>No.</th>
							<th>Tên sản phẩm</th>
							<th>Ảnh</th>
							<th>Kích cỡ</th>
							<th>Số lượng</th>
							<th>Giá</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="orderItem, sta : ${orderItems}">
							<td th:text="${sta.index + 1}"></td>
							<td th:text="${orderItem.productId}"></td>
							<td><img width="50" th:alt="${orderItem.productImage}"
								th:src="${'https://s3.cloudfly.vn/kltn/images/'+orderItem.productImage}">
							</td>
							<td th:text="${orderItem.size}"></td>
							<td th:text="${orderItem.quantity}"></td>
							<td class="pro-price" style="text-align: left;"
								th:text="${orderItem.price}"></td>
						</tr>
					</tbody>
				</table>
				<div class="row">
					<div class="col-md-6">
						<div style="font-weight: bold;">
							<div>
								<span>Đơn hàng: <span th:text="${order.id}"></span></span>
							</div>
							<div>
								Trạng thái: <span id="current-order-status" th:text="${order.status.getValue()}"></span>
							</div>
							<div>
								Ngày đặt: <span th:text="${order.createdDate}"></span>
							</div>
							<div>
								Số điện thoại: <span th:text="${order.phoneNumber}"></span>
							</div>
							<div>
								Địa chỉ: <span th:text="${order.address}"></span>
							</div>
						</div>
					</div>
					<div class="col-md-6">
						<div style="text-align: right; margin: 20px 0px;" th:if="${order.status.toString() != 'COMPLETED' && order.status.toString() != 'CANCELLED'}">
							<h4>
								Tổng tiền: <span th:text="${order.totalPrice}" class="pro-price"
									style="font-size: unset;"></span>
							</h4>
								<div id="btn-cancel">
									<a th:href="@{/order/remove/{id} (id=${order.id})}" class="btn btn-danger" style="color: white;">Hủy
										đơn</a>
								</div>
						</div>
					</div>
				</div>

			</div>
		</div>

		<span th:replace="~{/fragment/footer.html :: footer}"></span>
	</div>

	<div class="modal" tabindex="-1">
		<div class="modal-dialog">
			<div class="modal-content" style="margin: 35vh auto;">
				<div class="modal-body">
					<div style="text-align: center;">
						<div class="spinner-border" role="status">
							<span class="visually-hidden"></span>
						</div>
						<div style="margin-top: 20px;">Quá trình cập nhật thông tin
							đang diễn ra!</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
	<script async defer crossorigin="anonymous" th:src="@{/plugins/sdk.js}"></script>
	<script th:src="@{/plugins/jquery-3.4.1/jquery-3.4.1.min.js}"></script>
	<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script> -->
	<script th:src="@{/plugins/bootstrap/popper.min.js}"></script>
	<script th:src="@{/plugins/bootstrap/bootstrap.min.js}"></script>
	<script th:src="@{/plugins/owl.carousel/owl.carousel.min.js}"></script>
	<script th:src="@{/js/home.js}"></script>
	<script th:src="@{/js/script.js}"></script>
	<script th:src="@{/plugins/uikit/uikit.min.js}"></script>
	<script th:src="@{/plugins/uikit/uikit-icons.min.js}"></script>
	<script th:src="@{/js/profile.js}"></script>
	<script th:src="@{/js/currency.js}"></script>
	<script type="text/javascript">
	formatToVND()
	
	let currentOrderStatus = document.getElementById("current-order-status")
	let statusText = currentOrderStatus.textContent
	if (statusText == 'Bị hủy' || statusText == 'Đã hoàn tất') {
		if (statusText == 'Bị hủy')
			currentOrderStatus.style.color = 'red'
		else if(statusText == 'Đã hoàn tất')
			currentOrderStatus.style.color = 'green'
	}
	</script>
</body>

</html>